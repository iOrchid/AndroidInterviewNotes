## 文件管理

### 一、文件系统基础

#### 1.1 文件的相关概念

文件是以计算机硬盘为载体的，存储在计算机上的信息集合，如文档、图片、程序等。

文件的结构：数据项、记录、文件（有结构文件，无结构文件）

属性：名称、标识符、类型、位置、大小、保护、时间日期和用户标识

基本操作：创建、读写、重定位、删除、截断等

#### 1.2 文件的逻辑结构

- 无结构文件（流式文件），如文本文件；
- 有结构文件（记录式文件）：顺序文件、索引文件、索引顺序文件，如数据库

#### 1.3 目录结构

- 单级目录结构

  <img src="/Users/zhiwei/Documents/WorkSpace/Studio/AndroidInterviewNotes/操作系统/assets/os_file_single_directory.jpg" alt="os_file_single_directory" style="zoom:100%;" />

- 两级目录结构

  ![os_file_double_directory](/Users/zhiwei/Documents/WorkSpace/Studio/AndroidInterviewNotes/操作系统/assets/os_file_double_directory.jpg)

- 多级目录结构

  ![os_file_multi_directory](/Users/zhiwei/Documents/WorkSpace/Studio/AndroidInterviewNotes/操作系统/assets/os_file_multi_directory.jpg)

- 无环图目录结构

  <img src="/Users/zhiwei/Documents/WorkSpace/Studio/AndroidInterviewNotes/操作系统/assets/os_file_circle_directory.jpg" alt="os_file_circle_directory" style="zoom:100%;" />

  

#### 1.4 文件共享

保护不同的用户对文件有不同的操作权限

- 基于索引节点的共享文件（硬链接）
- 利用符号实现文件共享（软连接）：只是将文件路径链接共享到共享者的目录下。
- 文件保护：口令、文件加密、访问权限控制

### 二、文件系统实现

#### 2.1 文件层结构

1. 用户调用接口
2. 文件目录系统
3. 存储控制验证
4. 逻辑文件系统
5. 物理文件系统
6. 服务分配模块
7. 设备管理程序模块

#### 2.2 目录实现

线性列表、哈希表

#### 2.3 文件实现

文件分配方式：连续分配、链接分配、索引分配

### 三、磁盘组织与管理

磁盘：由表面涂有磁性物质的金属或塑料构成的圆形盘片，通过**磁头**导体线圈从磁盘存储数据。

![os_file_sdcard](/Users/zhiwei/Documents/WorkSpace/Studio/AndroidInterviewNotes/操作系统/assets/os_file_sdcard.jpg)

- 磁盘调度算法：
  - 先来先服务FCFS
  - 最短寻址时间优先SSTF
  - 扫描算法SCAN
  - 循环算法S- SCAN
- 磁盘的管理
  - 磁盘初始化：对磁盘进行低级格式化和逻辑格式化
  - 引导快：存放自举程序
  - 坏块：对于损坏扇区的处理